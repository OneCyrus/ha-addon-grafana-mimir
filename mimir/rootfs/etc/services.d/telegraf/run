#!/usr/bin/with-contenv bashio
# ==============================================================================
# Start the example service
# s6-overlay docs: https://github.com/just-containers/s6-overlay
# ==============================================================================

# Declare variables
declare scrape_ha

## Get the 'message' key from the user config options.
scrape_ha=$(bashio::config 'scrape_ha')

if $scrape_ha; then
    exec /bin/telegraf
else
    bashio::log.info "Not scraping HomeAssistant metrics into Mimir. Enable 'scrape_ha' option enable scraping."
    exec tail -f /dev/null
fi
